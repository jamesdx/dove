# 领域事件图模板
版本：[版本号]
日期：[日期]

## 1. 事件流概述

### 1.1 整体事件流
```mermaid
graph LR
    subgraph 上下文1
        E1[事件1]
        E2[事件2]
    end
    
    subgraph 上下文2
        E3[事件3]
        E4[事件4]
    end
    
    E1 --> E3
    E2 --> E4
```

### 1.2 事件分类
| 事件类型 | 所属上下文 | 触发条件 | 影响范围 |
|---------|-----------|----------|----------|
| [事件类型1] | [上下文] | [触发条件] | [影响范围] |

## 2. 核心领域事件

### 2.1 [事件组1]
```mermaid
classDiagram
    class DomainEvent {
        +UUID eventId
        +DateTime timestamp
        +String type
        +publish()
    }
    
    class Event1 {
        +属性1
        +属性2
        +process()
    }
    
    class Event2 {
        +属性1
        +属性2
        +process()
    }
    
    DomainEvent <|-- Event1
    DomainEvent <|-- Event2
```

### 2.2 [事件组2]
[使用相同的结构描述其他事件组]

## 3. 事件处理流程

### 3.1 [流程名称1]
```mermaid
sequenceDiagram
    participant S as 源服务
    participant E as 事件总线
    participant H as 处理器
    
    S->>E: 发布事件
    E->>H: 处理事件
    H-->>E: 处理完成
    E-->>S: 确认发布
```

### 3.2 [流程名称2]
[使用相同的结构描述其他流程]

## 4. 事件订阅关系

### 4.1 [事件组1]订阅
```mermaid
graph TB
    subgraph Publishers
        E[事件]
    end
    
    subgraph Subscribers
        H1[处理器1]
        H2[处理器2]
        H3[处理器3]
    end
    
    E --> H1
    E --> H2
    E --> H3
```

### 4.2 [事件组2]订阅
[使用相同的结构描述其他订阅关系]

## 5. 事件状态流转

### 5.1 [状态流转1]
```mermaid
stateDiagram-v2
    [*] --> 已发布
    已发布 --> 处理中
    处理中 --> 已完成
    处理中 --> 失败
    失败 --> 重试
    重试 --> 处理中
    已完成 --> [*]
```

### 5.2 [状态流转2]
[使用相同的结构描述其他状态流转]

## 6. 事件处理策略

### 6.1 事件处理规则
| 事件类型 | 处理优先级 | 重试策略 | 失败处理 |
|---------|-----------|----------|----------|
| [事件1] | [优先级] | [重试策略] | [失败处理] |

### 6.2 事件存储策略
| 事件类型 | 存储时间 | 存储方式 | 清理策略 |
|---------|----------|----------|----------|
| [事件1] | [时间] | [方式] | [策略] |

## 7. 事件监控

### 7.1 监控指标
| 指标 | 描述 | 警告阈值 | 监控周期 |
|------|------|----------|----------|
| [指标1] | [描述] | [阈值] | [周期] |

### 7.2 告警规则
| 规则 | 条件 | 级别 | 通知方式 |
|------|------|------|----------|
| [规则1] | [条件] | [级别] | [通知方式] |

## 8. 附录

### 8.1 事件Schema
```json
{
    "DomainEvent": {
        "eventId": "UUID",
        "timestamp": "DateTime",
        "type": "String",
        "version": "String",
        "data": "Object"
    }
}
```

### 8.2 变更历史
| 日期 | 版本 | 变更内容 | 作者 |
|------|------|----------|------|
| [日期] | [版本] | [变更内容] | [作者] | 